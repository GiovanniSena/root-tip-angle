% Chapter 4: DISCUSSION

\chapter{Discussion} % Main chapter title

\label{discussion} % For referencing the chapter elsewhere, use \ref{Chapter1} 

%%----------------------------------------------------------------------------------------
%
%% Define some commands to keep the formatting separated from the content 
%\newcommand{\keyword}[1]{\textbf{#1}}
%\newcommand{\tabhead}[1]{\textbf{#1}}
%\newcommand{\code}[1]{\texttt{#1}}
%\newcommand{\file}[1]{\texttt{\bfseries#1}}
%\newcommand{\option}[1]{\texttt{\itshape#1}}

%----------------------------------------------------------------------------------------

%PUT RESULTS IN BROADER PICTURE

%* What informed choice of methods?
%* Could it have been done in another way?
%* Which aspects of the work could be taken further?


%----------------------------------------------------------------------------------------
%----------------------------------------------------------------------------------------
\section{Validation on more images}

[INSERT ERROR MEASUREMENTS NEED TO BE OBTAINED, CURRENTLY NOT EXISITING IN MANUALLY COMPUTED ANGLES AND ALSO NOT IN ROOTSKEL, IN ORDER TO MAKE VALID ASSUMPTIONS ON ROBUSTNESS AND REPITABILITY]

%Certainly, validation needs to be done on a bigger data set in order for our claim to not only be a well grounded belief.
%As this could not happen in this project due to time constraints we suggest a thorough (statistical) analysis of the collected data and, subsequently, quantification of population heterogeneity in electrotropic responseas future work.


%----------------------------------------------------------------------------------------
%----------------------------------------------------------------------------------------
\section{Challenges and limitations of \textit{RootSkel}}

%Difficult decisions had to be made in planning the research, leading to subsequent tradeoffs. Then, focus in on the need for future work.
During the development process of \textit{RootSkel} various challenges were encountered and trade-offs to overcome them were necessary; there are some limitations of \textit{RootSkel} users should be aware of and future developers can wowrk on.


%----------------------------------------------------------------------------------------
\subsection{Non-planar root}

Another challenge of stuying electrotropism compared to gravitropism is that is is much harder to keep the roots in a plane, ie keep them from growing in a third direction, due to the experimental set up to capture electrotropism. Since we only take 2D images, there will inevitably be an error in the angle calculation by the simple fact that the plants do not bend in a perfect plane.
%compared to gravitropism, it is much harder to keep the roots in a plane. we only capture the angle based on 2D images.


%----------------------------------------------------------------------------------------
\subsection{Skeletonisation of the root}

Probably the biggest challenge in the development process was to extract the root skeleton, precisely to discern the root from the background and the noise, mainly due to the low contrast between them.
Our approach of implementing different colour and intensity filters is not optimal as these might not filter out the noise. 
%For that we mostly implemented colour and intensity filters which can still include different kinds of noise. 
The most distinct feature of the root is the tubular structure and functions that recognise this have been used; however, this can still be optimised in the future.

%we did not get the most out of it
%get rid of loop


%----------------------------------------------------------------------------------------
\subsection{Challenging photos}

%There is a very low contrast between the background and the roots, so that one could hardly recognise the roots on some images [INSERT EXAMPLE IMAGE HERE].
The data set we were working on contained highly challenging photos, this was due to
\begin{itemize}
	\item \textbf{Low} contrast between roots and background; the roots were almost not discernible for the human eye without previous treatment of the image
	\item Lots of noise or \textbf{objects} that we classified as noise as there was \textit{no apparent structure} to it
	\item Different \textbf{noise patterns} across the images; the noise was subtle or hiding and could only made visible on filtered images
	\item \textbf{Numerous objects} that were of no interest, especially the ones \textbf{interferring} with our object of interest
	\item \textbf{Low resolution} of the images or object of interest itselves taking up only a small fraction of the whole image. 
\end{itemize}
Highly pixeled images made not only the preprocessing but especially the curvature computing part challenging; also various MATLAB functions do not work well on sparse data.

[INSERT 4 EXAMPLES HOW CHALLENGING DATA WAS, MAYBE IN APPENDIX]

%EXAMPLE: Objects interferring with object of interest
%Eg specs not so much of an issue as separate from the root. Issue when it is connected.


%----------------------------------------------------------------------------------------
\subsection{Scalability and reproducability}

The variation in the noise pattern in the images made it difficult to automate the process of extracting the root skeleton; every image is unique and needs to be treated uniquely. The developed pipeline works well on many images; other images require special and longer treatment. Scalability has been and continues to be a challenge.

Even though our angle computation is deterministic and straight-forward and only depends on the root skeleton, there is still some variability in the preprocessing step due to the user's input. This means, it can happen that for the very same root in the very same image we get slightly different angles due to slightly different root skeletons. %This is due to the fact that our current version of \textit{RootSkel} does require user input for the preprocessing steps, meaning results of the root skeleton might slighly vary depending on the user's input.
However, the error in the angles we observed is tiny and within reasonable bounds to be neglectable. Having said that, reproducability can not be fully guaranteed, though. 


%----------------------------------------------------------------------------------------
\subsection{High user-interaction}

Even though \textit{RootSkel} comes with a lot of flexibility and simplicity in the user interaction, it would be desirable to have less user input to guarantee reproducability and save time in the process overall. 

This might overall be improved by high-quality images in the future as well as implementing approaches that try to automate the whole preprocessing process.



%Might be reduced with better-quality images, however very flexible.


%standard-deviation not as high as i think?

%Would be desirable if it could be automated more. 


 
%----------------------------------------------------------------------------------------
%----------------------------------------------------------------------------------------
\section{Further work}

In the follwing we will outline suggestions for future work including things that need optimisation or features that might be nice to implement in the future. 


%----------------------------------------------------------------------------------------
\subsection{Use more shape-based filters}

To overcome the problem of separating the root from the background and the noise, one should use and optimise specific shape-based filters instead of a series of colour and intensity filters that have shown to be not very efficient on our data set. This is due to the observation that the tubular structure is the most distinctive feature of the roots. Tubular structure recognising fulters have been implemented but there is room for improvement. This might help to extract the skeleton more easily and reliably without the need of optional cropping or cleaning.


%----------------------------------------------------------------------------------------
\subsection{Effective noise reduction}

In order to tackle the problem of noise reduction, it might be advisable to consult an expert not only on image processing but especially in the field of noise reduction to effectively implement filters that get rid of the different noise our images contain. 

%EXPLOIT FACT THAT TIME SERIES IMAGE


%----------------------------------------------------------------------------------------
\subsection{Less user input up to automatisation}

Here in the first version of \textit{RootSkel}, the main goal was to standardise the angle computation; if in the future  a method for handling the different noise pattern in the images was efficiently handled which require less user input, it would be desireable to automate the whole angle computation.

%in order to increase robustness on unseen data (which was not the goal of this work), first, one needs to collect high-quality data and second, tweak the data 
 
 
%----------------------------------------------------------------------------------------
\subsection{Robustness}

%The workflow developed via  many iterations on different images and 
%elaborate pre-procecessing tool for skeletonisation
%high functionality, reiterated process
%has been overengineered on one dataset, if it should be robust on other data, it needs to be trained/ tweeked on other data.


Many iterations on different images of our data set led to an elaborate tool for the pre-processing of the root; however, we can not prevent that the tool does fail on some images. 

If one wants to make the tool available to a wider public and make it more robust so it will work on other, unseen data (which was not the goal of this work), one might want to collect higher-quality, less noisy data in the future and investigate automated approaches such as adaptive thresholding. 


%High-throughput software tools that can produce objective, quantitative analyses od the resulting images are now required.



%----------------------------------------------------------------------------------------
\subsubsection{Adaptive thresholding}
%  Another similar approach would be to ask the user to quickly draw small ROI (rectangles) to frame each root in the inverted (much easier) image. The code could then global threshold each ROI separately and go from there.
Before opting to take user input in the form of samples of the roots in the image, we investigated adaptive (global) thresholding on each of the root and an adaptive variable setting approach on all of the roots together to extract the root. This however failed, or would have been beyond the scope of this project -- the reason why we implemented it the way it was suggested.


%----------------------------------------------------------------------------------------
\subsection{Maintenance and bug fixing}

Even though \textit{RootSkel} is a tool that is ready to be used, and we tried to cover as many cases as possible of things that could go wrong and these bugs need fixing. 
As we commented the code generously and kept log files about all changes and decisions made, a future developer should not have any problems building upon our source code.

%INSERT BUG FIXES HERE


%----------------------------------------------------------------------------------------
\subsection{More features}

More features such as a zooming in function at the beginning of force tip can be included; however, they will not change anything in the core functionality of \textit{RootSkel}.

Also, what would be nice to implement in the GUI or in an extra window from a user perspective is a graph superimposing the skeleton to illustrate what angle is computed. This way, the user can doublecheck that the correct angle is computed. This feature will be provided in the next version of \textit{RootSkel}.


%----------------------------------------------------------------------------------------
\subsection{Other programming languages}

Eventhouth MATLAB has several advantages, it might worth looking into alternative non-proprietary programming language to make the tool accessible to a wider public or other options of making the tool portable, ie without requiring the user to have MATLAB installed.
Alternative languages that one want to consider are \textit{Python} and \textit{Julia}. Another recommended language is \textit{OpenCV} as it is very fast and well documented. Other non-open source software such as \textit{ImageJ}, a Java based image processing program, and \textit{Avizo} which is a general-purpose commercial software application for scientific and industrial data visualisation and analysis with a nice GUI, could not be investigated further in this work. 


%----------------------------------------------------------------------------------------
\subsection{Other ways of curvature and angle measuring}

What was implemented as we found that this approach worked best on these data and this resolution. However, MATLAB does have some issues with singularities, eg it whenever the angle is (exactly) 45 degrees one should doublecheck of this is due to an infinity issue in the arctan. 

Also, for the angle computation we might want to exploit the fact that we have time series data. It means that technically it does not require do compute the angle on each single image but only the difference in the angle to the previous image, since we assume the turning point does not change over time. 

Once we have higher-resolution images or a denser data set, we will also  achieve a better approximation of the real curvature. In the meantime, it might be worthwile to investigate more maybe better appraoches to compute curvatures on sparse data sets. 

Also, alternative definitions  instead of an emulation of the so far manually computed angle, such as the curvature itself and possibly more robust methods of computing it might be worth looking into further. 
 

%----------------------------------------------------------------------------------------
%\subsubsection{Curvature better on dense data set}
%
%% FUTURE WORK: curvature on a sparse polygon like this might not be very
%% meaningful but that does not mean it is not possible to apply the
%% discrete approximation to the derivative to compute it. 
%% The same code on a more densly samples outline will give a good
%% approximation of the curvature of the outline
%
%%Standardised and automated version of angle computation



%%%%%%%%%%%%%%%%----from here

%----------------------------------------------------------------------------------------
\subsection{Error quantification in the angle computation}

Another additional step towards verification of our results would be to include an error quantification in the angle computation, that is what is the maximum error in the final result due to the changes in the pre-processing step. This could be computedempirically by trying our tool on a large amount of data.


%----------------------------------------------------------------------------------------
%----------------------------------------------------------------------------------------
\section{Broader application of this tool}

This tool can be reused for many purposes, and is not restricted to root detection.
It might also be used for easier problems like gravitropism.


[MAYBE THE FOLLOWING IN APPENDIX]

%----------------------------------------------------------------------------------------
%----------------------------------------------------------------------------------------
\section{Suggestions for future data acquisition}

We will give some suggestions on how to improve the quality of the images in the future.


%----------------------------------------------------------------------------------------
\subsection{Stable conditions in the experiment}

In general, one should ensure to keep the conditions over one experiment stable as far as possible. It should be noted that this is far harder to achieve in a dynamic system as the one to capture electrotropism compared to a gravitropism setup usually done in an agar gel. 
This includes a constant number of tubes and roots, constant water level or surface and no external movement to the roots or the tubes to keep the noise distribution as constant as possible. Roots that are affected by change in reflections or illumination (eg by people walking into the room) have been proven to be very hard to handle and are often lost in the preprocessing step. 
Keeping the medium clean of dirt and bubbles as far as possible also will improve the preprocessing step. 


\subsection{No objects interfering with the object of interest}

The experimentalist should make sure that there are no objects interfering with the object of interest, be it other roots or any other similar looking objects that are hard to discern even by eye, throughout the experiment.

%llumination different — challenge to get background right
%local thresholds maybe?


%----------------------------------------------------------------------------------------
\subsection{Increase of the contrast}

It is advisable to work towards achieving a higher contrast in the images, so roots can be clearly distinguished from the background, also by eye.


%%----------------------------------------------------------------------------------------
%\subsection{More focus on images}


%----------------------------------------------------------------------------------------
\subsection{Higher resolution}


As the highly pixeled nature of the images did cause problems also in the angle computation, it is recommendable to try to increase the resolution of the images. We could also try to zoom into the roots or even one single root so our actual object(s) of interest take a bigger fraction in the images instead of wasting resolution on things that are of no interest. 

It could also be the compression step after taking the images that might cause or contribute to the low resolution of the images. One could attempt to user other formats to save the images. 

As a last suggestion, different cameras could be compared to see if it does have an effect on the quality of the images. 

%Better camera, less waste of resolution
%improve spatial resolution, other format? no compression?



